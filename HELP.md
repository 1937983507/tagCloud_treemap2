# TreeMap 标签云 - 用户手册

## 概述

最后更新时间：2025年11月28日

### 1. 项目定位

`tagCloud_treemap2` 面向 **路径语义分析** 与 **地名可视化** 场景，结合高德地图绘线、POI 数据筛选与多 Treemap/词云算法，实现 “绘制线路 → 精准筛选 → 一键生成标签云” 的闭环体验。系统特别强化 **TreeMap 剖分**、**路线关联分析** 与 **多参数联动调优**，适用于旅游线路讲解、交通走廊分析、教学演示等任务。

### 2. 产品亮点

- **路线感知 + TreeMap**：根据折线/路径自动识别途经城市，将景点权重映射至 7 种 TreeMap 布局或词云算法。
- **高自由度多面板**：内容、字体、配色、布局、线条五大面板协同工作，所有调整即时刷新标签云。
- **可导出多种格式**：SVG、PNG、JPEG 一键导出，适合嵌入汇报/论文。
- **专家特性**：支持权重自定义、字体分级、标签动态遮罩与高级配色。

![首页示意](/img/生成标签云.png "scale:100%")

---

## 快速上手

最后更新时间：2025年11月28日

1. **首页**：
![首页](/img/首页.png "scale:100%")

2. **在地图绘制路径**：点击手绘、设起止点，完成线路后自动识别沿途城市。
![绘制折线](/img/绘制折线.png "scale:60%")

3. **进入标签云面板生成**：点击 “运行生成标签云”，右侧即时预览。
![运行生成标签云](/img/运行生成标签云.png "scale:100%")

4. **优化细节**：调整字体、配色、布局、线条后标签形态立即更新。
![布局修改](/img/布局修改.png "scale:100%")

5. **成果导出与分享**：支持 SVG/PNG 图像导出，或复制截图。
![导出图片](/img/导出图片.png "scale:70%")


---

## 入门教程

最后更新时间：2025年11月28日

### 功能面板详解

#### 1. 线路绘制与地图交互
- **支持手动绘线/智能寻路**，途经城市自动归集
- 可切换多种底图风格

#### 2. 内容面板（`PoiContent`）
- **城市路线同步刷新**

![绘制折线](/img/绘制折线.png "scale:60%")

#### 3. TreeMap 布局面板
- 7 种经典布局（Resquarify/Binary/Dice/Slice/Strip/Spiral/Pivot）随时切换
- 切换布局后，画布立即刷新
- 算法原理可参考 [d3-hierarchy 官方文档](https://github.com/d3/d3-hierarchy)

![布局选择](/img/布局修改.png "scale:100%")

#### 4. 字体面板
- 支持自选字体、字重（100-900）、字号范围调节
- 标签分级，与城市排名/权重数据联动
- 可选择中英字体，适配大屏展示与论文插图

![字体调节](/img/字体修改.png "scale:100%")

#### 5. 配色面板
- **背景配色、文字配色**可自定义（四色带调色板）
- 支持色带翻转、自定义颜色

![配色调节](/img/配色修改.png "scale:100%")

#### 6. 线条与路径样式
- 三种连线形态可选（无/曲线/折线）
- 支持调节线宽、颜色，强调动线流向与节点停靠

![线路样式](/img/线条修改.png "scale:100%")

#### 7. 标签云画布与导出
- 导出图片/矢量图（SVG/PNG/JPEG）
- 支持自定义宽高、锁定尺寸比例
- 可复制画布内容为图片，便于 PPT、论文/海报制作

![导出图片](/img/导出图片.png "scale:70%")

### 高级玩法与优化建议

#### 1. 标签动态分级
- 用景点权重/城市排名分配字号，实现主次分明
- 字号区间建议范围 16~45，可根据屏幕调节

#### 2. 自定义色带
- 点击配色面板任意颜色即可定制，每次编辑自动预览
- 配色建议：与主题风格/行政区配色协同

#### 3. 城市标签与词云混排
- 标签云支持嵌入“城市名”加粗激活，自动居中
- 标签颜色默认红色

### 常见问题与维护

1. **城市未正确识别？**
   - 检查路径节点是否穿过行政区边界；适当加密点
   - 可手动添加/删除城市进行修正

2. **导出图片模糊？**
   - 优先选择 SVG 格式，或导出时手动提升尺寸
   - 浏览器截图请先放大页面视图

3. **如何保存配置和结果？**
   - 左侧各面板参数实际即为可复用配置
   - 建议截图保存或同步项目 JSON 配置

### 进阶与案例扩展

#### 案例一：景区旅游路线分析
   - 选定起止点，批量添加热门景点权重
   - 切换不同 Treemap 布局，比较覆盖率
   - 导出图片用于讲解

#### 案例二：交通走廊流量分析
   - 导入多条公交/地铁/高速路径，比较城市节点权重
   - 调整配色方案，突出流量差异

#### 案例三：行业定制
   - 支持导入自定义行业数据集（如展会、连锁门店）
   - 根据权重标签分析地区热点与覆盖空白

---

## 相关下载与资料

最后更新时间：2025年11月28日

- [概述/快速上手/入门教程（PDF 合集）](/doc/地名标签云-概述.pdf)  

---

## 视频专区

最后更新时间：2025年11月28日

- **路线标签云工作流讲解（筹备中）**
- **Treemap 布局调优案例（筹备中）**
- *更多演示视频，后续持续更新*

---

## 联系方式与社区

最后更新时间：2025年11月28日

- [项目主页](https://github.com/1937983507/tagCloud_treemap2)
- 如需行业定制、技术支持或 bug 反馈，欢迎联系 1937983507@qq.com
